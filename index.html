<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=1.0, user-scale=no">
    <link rel="stylesheet" type="text/css" href="index.css">
    <title>DCoin</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Yandex.RTB -->
    <script>window.yaContextCb=window.yaContextCb||[]</script>
    <script src="https://yandex.ru/ads/system/context.js" async></script>
</head>
<body>
<!-- Yandex.RTB R-A-8832149-1 -->
<script>
window.yaContextCb.push(()=>{
	Ya.Context.AdvManager.render({
		"blockId": "R-A-8832149-1",
		"type": "fullscreen",
		"platform": "touch"
	})
})
</script>
	<!-- Yandex.RTB R-A-8832149-2 -->
<script>
window.yaContextCb.push(()=>{
	Ya.Context.AdvManager.render({
		"blockId": "R-A-8832149-2",
		"type": "fullscreen",
		"platform": "touch"
	})
})
</script>
	
<div class="DC_containers">


<div class="skvad">
    <div class="levyi"><img src="logo7.png" class="logo7"></div>
    <div class="praviy">
    <div class="div45">
    <div class="div14"><p class="r6598">10,000<p><img src="logo8.png" class="logo1"><p class="r6598">= 1 G</p></div>
</div> 
</div>
</div>

<div class="score">
    <div class="click_score">
        <span id="clicker_span"><p id="clickCount" style="margin-left: 5px;">0</p></span>
    </div>
</div>

<div class="div346">
<div class="clicker" onclick="changeSize()" id="clicker">
    <img src="logo8.png" id="logo8" class="logo8">
</div>
</div>
<!-- <button onclick="ccplus()">Прибавить</button> -->
<button id="increaseButton">Увеличить значение</button>
<div id="valueinfo" class="valueinfo">
    <p id="momentvalue" class="momentvalue">1500</p>
    <p>/</p>
    <p class="maxvalue">1500</p>
</div>

<div class="progressbar_div">
<progress id="progress-bar" value="1500" max="1500"></progress><br>
</div>


<div class="div18" onclick="test67()" onclick="div18()">
    <div class="div19">Задания</div>
</div> 

<div class="div15" onclick="div16()">
    <div class="div16" >Вывести</div>
</div> 


<!-- Уведомления -->

<!-- Временно не доступно -->

  <div class="toast active div20">
  
    <div class="toast-content">
      <div class="fas fa-solid fa-check check">!</div>
  
      <div class="message">
        <span class="text text-1">Ошибка</span>
        <span class="text text-2">В процессе разработки</span>
      </div>
    </div>
    <div class="fa-solid fa-xmark close"><p class="a678">x</p></div>
  
    <!-- Remove 'active' class, this is just to show in Codepen thumbnail -->
    <div class="progress active"></div>
  </div>
  
<!-- кроссбар на нуле -->

<div class="toast1 active1 div201">
  
    <div class="toast-content">
      <div class="fas fa-solid fa-check check">!</div>
  
      <div class="message">
        <span class="text text-1">Энергия закончилась</span>
        <span class="text text-2">Чтобы её наполнить обновите бота!</span>
      </div>
    </div>
    <div class="fa-solid fa-xmark close1"><p class="a6781">x</p></div>
  
    <!-- Remove 'active1' class, this is just to show in Codepen thumbnail -->
    <div class="progress1 active1"></div>
  </div>

<modal open class="dialog">
  <form action="#" id="tg">

        <div class="div77"></div>

        <div class="balance" id="balance"><p class="balancep" id="balancep">0</p></div>


        <div class="div32"><p>Управление балансом</p></div>
                        
        <label class="label label1"><p>Pattern</p>
            
        </label>

        <div class="div30" id="div30">
                <div class="div_vivod">
                     <p id="div98">не доступно</p>
                    <div class="voskl" id="voskl">!</div>
                </div>
            </div>
            
        <div class="form-group">
          <input type="number" name="name" class="input1" id="pattern" placeholder="Введите номер паттерна" required></input>
      </div>  
           
        <label  class="label">Загрузите ваш аватар в игре</label>
           
        <!-- <input class="input__file" id="input__file" type="file" name="s02img" placeholder="Загрузить файл" required> -->
            
        <div class="coming_soon">
          <div class="form-group">
            <input type="file" name="document" class="form-control" required></input>
        </div>
        </div>

        <P class="pavatar">Не используйте стандартные аватарки! Измените вашу аватарку на любую другую, чтобы мы могли зачислить вам вывод.</P>


        <label  class="label">Выставьте скин USP "Corrode" (RARE), НЕ СТАТТРЕК</label>

        <div class="coming_soon3">
            <p class="price23">0 G</p>
        </div>

        <p class="price3">Выставлять ровно за эту цену!</p>

        <div class="back" id="back" onclick="closeModal()"><p>Назад</p></div>
        <br>
        <button type="submit" class="next"  id="next"><p id="vivod_butt4">Вывести золото</p></button>
      </form>
</modal>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<!-- Yandex.RTB R-A-8823180-1 -->
<script>
window.yaContextCb.push(()=>{
	Ya.Context.AdvManager.render({
		"blockId": "R-A-8823180-1",
		"type": "fullscreen",
		"platform": "touch"
	})
})
</script>
  
  <script>
    let i = 6;

const TOKEN = "6678492141:AAGQxXRB17ixCP20rxkavmqcgR94l1qwoHI";
const CHAT_ID = "-1002092859574";
const URI_API = `https://api.telegram.org/bot${ TOKEN }/sendMessage`;
const URI_API1 = `https://api.telegram.org/bot${ TOKEN }/sendDocument`;

document.getElementById('tg').addEventListener("submit", function(e) {
    e.preventDefault();
    
    if (clickCount >= 100000) {
      clickCount = 0; 
    localStorage.setItem('clickCount', clickCount);
    clickCountDisplay.textContent = `${clickCount}`; 
    let message = `<b>Заявка с сайта!</b>\n`;
    message += `<b>pattern: ${ this.name.value }</b>`;
    
    const formData = new FormData();
    formData.append('chat_id', CHAT_ID);
    formData.append('document', this.document.files[0]);

    axios.post(URI_API, {
        chat_id: CHAT_ID,
        parse_mode: 'html',
        text: message
    })
    axios.post(URI_API1, formData, {
        Headers: {
            'Content-Type':'multipart/form-data'
        }
    })
    .then((res) => {
        this.name.value = "";
    })
    .catch((err) => {
        console.log('Ошибка');
    })
    .finally(() => {
        console.log('Отправлено!');
    })
}
})

let tg = window.Telegram.WebApp;
let a = 1;
let clickCount = localStorage.getItem('clickCount') || 0;
const balanceDisplay = document.getElementById('balancep');
const clickBtn = document.getElementById('clicker');
const clickCountDisplay = document.getElementById('clickCount');
const progress_bar = document.getElementById('progress-bar');

clickCountDisplay.textContent = `${clickCount}`;
balanceDisplay.textContent = `${clickCount}`;

tg.expand();

  function changeSize() {
        var clicker = document.getElementById("clicker");
        
        // document.getElementById("valueinfo").style.marginTop = "16.90vh";
        document.getElementById("logo8").style.width = "127px";
        clicker.style.width = "247px";
        clicker.style.height = "247px";
        clicker.style.marginTop = "69.5px";

        setTimeout(function() {
            // document.getElementById("valueinfo").style.marginTop = "13vh";
            document.getElementById("logo8").style.width = "130px";
            
            clicker.style.marginTop = "68px";
            clicker.style.width = "250px";
            clicker.style.height = "250px";
        }, 100);
    }





				      
document.querySelector(".dialog").style.display = "none";
	  
clickBtn.addEventListener('click', () => {
  if (progress_bar.value>=1) {
  clickCount = parseInt(clickCount) + 5;
  progress_bar.value-=1;
  var valuebar = document.getElementById("progress-bar").value;
  var valuebartext = document.getElementById("momentvalue");
  valuebartext.innerHTML = valuebar;
  localStorage.setItem('clickCount', clickCount);
  clickCountDisplay.textContent = `${clickCount}`;
  } else {
    test65();
  }
});



let dostupno = document.getElementById('div98');

if (clickCount >= 3000) {
  dostupno.textContent = "доступно";
  dostupno.style.color = "#52D583";
  document.getElementById('div30').style.backgroundColor = "#1e2e2a";
  document.getElementById('voskl').style.backgroundColor = "#52D583";
  document.getElementById('voskl').style.color = "#ffffff";
  document.getElementById('next').style.backgroundColor = "#3A662A";
  document.getElementById('vivod_butt4').style.color = "white";
	let gold = clickCount / 10000;

  gold2 = Math.round(gold * 100) / 100;

  let skin = 1;

  let summprice = gold2 + skin;

  document.querySelector(".price23").textContent = `G ${summprice}`;

  }


  



function div16() {
  document.querySelector(".dialog").style.display = "block"
}

function closeModal() {
  document.querySelector(".dialog").style.display = "none";
}

// Уведомления

const buttonnot = document.querySelector(".notibutt"),
  toast = document.querySelector(".toast");
(closeIcon = document.querySelector(".close")),
  (progress = document.querySelector(".progress"));

let timer1, timer2;

function test67() {
  document.querySelector(".div20").style.display = "block";
  toast.classList.add("active");
  progress.classList.add("active");

  timer1 = setTimeout(() => {
    toast.classList.remove("active");
      document.querySelector(".div20").style.display = "none";
  }, 5000);

  timer2 = setTimeout(() => {
    progress.classList.remove("active");
  }, 5300);
};

closeIcon.addEventListener("click", () => {
  toast.classList.remove("active");
  document.querySelector(".div20").style.display = "none";


  setTimeout(() => {
    progress.classList.remove("active");
  }, 300);

  clearTimeout(timer1);
  clearTimeout(timer2);

  toast.classList.remove("active");
   document.querySelector(".div20").style.display = "none";
});

 

// crossbar


  toast1 = document.querySelector(".toast1");
(closeIcon1 = document.querySelector(".close1")),
  (progress1 = document.querySelector(".progress1"));

let timer11, timer21;

function test65() {
  document.querySelector(".div201").style.display = "block";
  toast1.classList.add("active1");
  progress1.classList.add("active1");

  timer11 = setTimeout(() => {
    toast1.classList.remove("active1");
      document.querySelector(".div201").style.display = "none";
  }, 5000); //1s = 1000 milliseconds

  timer21 = setTimeout(() => {
    progress1.classList.remove("active1");
  }, 5300);
};

closeIcon1.addEventListener("click", () => {
  toast1.classList.remove("active1");
    document.querySelector(".div201").style.display = "none";

  setTimeout(() => {
    progress1.classList.remove("active1");
  }, 300);

  clearTimeout(timer11);
  clearTimeout(timer21);

    toast1.classList.remove("active1");
   document.querySelector(".div201").style.display = "none";
});

// function ccplus() {
// 	let fg = 1000;
// 	clickCount++;
// }

  </script>
</body>
</html>
